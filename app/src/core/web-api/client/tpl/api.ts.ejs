import sdk from "@api/sdk";

<% webapiGroup.apis.forEach(apiItem=>{ %>

/**
 *
 * <%=apiItem.comment%>
 *
 */
async function <%=apiItem.name%>(
    <% apiItem.requestParam.forEach(paramItem=>{ %>
        <%=paramItem.name%>:<%=Util.genInterfaceName(apiItem.name,paramItem.name,"req")%>,
    <% }) %>
):Promise<<%= apiItem.responseSchema?Util.genInterfaceName(apiItem.name,"res"):"any"%>> {
  let result = await sdk.<%=Util.getMethodName(apiItem.method)%><%-apiItem.responseSchema? "<"+Util.genInterfaceName(apiItem.name,"res")+">":""%>(
  "<%=apiItem.url%>"
    <% apiItem.requestParam.forEach(paramItem=>{ %>
           <% if (paramItem.isInPath) { %>
           .replace("{<%-paramItem.name %>}",<%-paramItem.name %>)
            <% }  %>
    <% }) %>

  , {
      <% apiItem.requestParam.forEach(paramItem=>{ %>
       <% if (paramItem.isInPath) { %>
          <%=['string','integer','number','date','file'].includes(paramItem.jsonSchema.type)?"":"..."%><%=paramItem.name%>,
        <% }  %>

      <% }) %>
  });
  return  result.data;
}
<% }) %>


export default {
<% webapiGroup.apis.forEach(apiItem=>{ %>
    <%=apiItem.name%>,
<% }) %>
};



<%-tsDefinded%>